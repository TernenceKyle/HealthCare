<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jadenyee.dao.AuthorityDao">
    <!--分页查询用户-->
    <select id="findUserList" parameterType="String" resultType="com.jadenyee.pojo.User">
        select id,username,gender,birthday,telephone,station,remark from t_user
        <if test="value != null and value.length > 0">
            where username like '%${value}%'
        </if>
    </select>
    <!--新增用户-->
    <insert id="userAdd" parameterType="com.jadenyee.pojo.User">
        insert into t_user(username,password,gender,birthday,remark,telephone)
        values (#{username},#{password},#{gender},#{birthday},#{remark},#{telephone})
    </insert>
    <!--查询全部角色-->
    <select id="findAllRole" resultType="com.jadenyee.pojo.Role">
        select * from t_role
    </select>
    <!--查询用户的全部角色-->
    <select id="findRolesByUser" parameterType="int" resultType="int">
        select role_id from t_user_role where user_id = #{id}
    </select>
    <!--删除指定用户的角色-->
    <delete id="deleteUserRole" parameterType="int">
        delete from t_user_role where user_id = #{id}
    </delete>
    <!--添加指定用户的指定角色-->
    <insert id="addUserRole" >
      insert into t_user_role
      values (#{userId},#{roleId})
    </insert>
</mapper>